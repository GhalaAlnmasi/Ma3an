{% extends 'backOffice/base.html' %}
{% block content %}

<div class="d-flex justify-content-between align-items-center mb-3">
    <h3 class="mb-0">Edit Subscription</h3>
    <a class="btn btn-outline-secondary" href="{% url 'backOffice:manage_subscriptions' %}">Back</a>
</div>

<div class="card shadow">
    <div class="card-body">
        <p class="mb-3"><strong>Agency:</strong> {{ sub.agency.agency_name }}</p>

        <form method="post">
            {% csrf_token %}

            <div class="mb-3">
                <label class="form-label">Plan</label>
                <select class="form-select" name="plan_id">
                    {% for p in plans %}
                        <option value="{{ p.id }}" {% if p.id == sub.plan.id %}selected{% endif %}>
                            {{ p.subscriptionType }} ({{ p.price }})
                        </option>
                    {% endfor %}
                </select>
            </div>

            <div class="mb-3">
                <label class="form-label">Status</label>
                <select class="form-select" name="status">
                    {% for value, label in status_choices %}
                        <option value="{{ value }}" {% if value == sub.status %}selected{% endif %}>
                            {{ label }}
                        </option>
                    {% endfor %}
                </select>
            </div>

            <div class="mb-3">
                <label class="form-label">Expiry date</label>
                <input class="form-control" type="date" name="expiry_date" value="{{ sub.expiry_date|date:'Y-m-d' }}">
            </div>

            <button class="btn btn-dark" type="submit">Save</button>
        </form>
    </div>
</div>

{% endblock %}
